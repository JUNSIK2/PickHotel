<html layout:decorate="~{layout/user_layout}" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:th="http://www.thymeleaf.org">
<div class="board-page" id="postList" layout:fragment="content">
    <div class="row" id="page-title">
        <h1 class="text-center" th:text="${board.title}"></h1>
    </div>
    <div class="todo-content">
        <table class="table table-bordered table-striped table-condensed flip-content post-list-table">
            <thead>
            <tr>
                <th>번호</th>
                <th>제목</th>
                <th>작성일</th>
                <th>작성자</th>
                <th>조회수</th>
            </tr>
            </thead>
            <tbody>
					<tr th:if="${posts==null}">
						<td class="text-left" colspan="5">등록된 게시글이 없습니다.</td>
					</tr>
					<tr th:each="post : ${posts}"  th:if="${posts!=null}">
						<td th:text="${post.postNo}"></td>
                        <td><a th:href="@{/post/{postNo}(postNo=${post.postNo})}"><span class="post-subject"
                                                                                                              th:text="${post.subject}"></span><span
                                class="post-comment" th:text="'('+${post.commont}+')'"></span></a>
						</td>
						<td><span th:text="${post.createDate}"></span></td>
						<td><span th:text="${post.writerNick}"></span></td>
                        <td><span th:text="${post.views}"></span></td>
					</tr>
            </tbody>
        </table>
        <div id="writePost" style="text-align: right;">
            <a th:href="@{/post/write(boardNo=${board.boardNo})}">
                <button class="btn btn-primary" type="button">글작성</button>
            </a>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <div class="dataTables_paginate paging_simple_numbers" id="dataTable_paginate">
                    <th:block layout:fragment="paging" th:include="@{/fragment/pagination}"></th:block>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 col-md-6 col-12">
                <form th:action="@{/board/{boardNo}(boardNo=${boardNo})}" method="GET" id="postSearch"
                      onsubmit="return false;">
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <select class="form-control select2bs4" name="searchType" id="searchType">
                                <option value="" th:selected="${params.searchType == ''}">==필터==
                                </option>
                                <option value="subject" th:selected="${params.searchType == 'subject'}">제목
                                </option>
                                <option value="content" th:selected="${params.searchType == 'content'}">내용
                                </option>
                                <option value="nick" th:selected="${params.searchType == 'nick'}">닉네임
                                </option>
                            </select>
                        </div>
                        <input type="text" class="form-control" placeholder="검색어를 입력하세요."
                               name="searchKeyword" th:value="${params.searchKeyword}" id="searchKeyword">
                        <button class="btn btn-primary" type="button" id="searchBtn">
                            <i class="fa fa-search fa-sm"></i>
                        </button>
                        <a th:if="${not #strings.isEmpty(params.searchKeyword)}" th:href="@{/board/{boardNo}(boardNo=${boardNo})}"
                           class="d-none d-sm-inline-block btn btn-sm btn-info shadow-sm">필터 해제</a>
                    </div>
                </form>
            </div>
            <script>
                var send = document.getElementById("searchBtn");
                send.addEventListener("click", function () {
                    var form = document.getElementById("postSearch");
                    var searchType = document.getElementById("searchType");
                    var psearchKeywordw = document.getElementById("searchKeyword");

                    if (searchType.value.trim() == "") {
                        alert("필터를 선택해주세요.");
                        return false;
                    }
                    if (psearchKeywordw.value.trim() == "") {
                        alert("검색어를 작성해주세요.");
                        return false;
                    }
                    form.submit();
                });
            </script>
        </div>
    </div>
</div>